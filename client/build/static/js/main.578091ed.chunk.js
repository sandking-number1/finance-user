(this["webpackJsonpclient-new"]=this["webpackJsonpclient-new"]||[]).push([[0],{24:function(e,t,s){},43:function(e,t,s){},49:function(e,t,s){},68:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),c=s(33),r=s.n(c),l=s(6),o=(s(41),s(2)),i=s(15),d=s.n(i),j=s(17),h=s(34),b=s(4),u=s(5),O=s(8),m=s(7),x=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,s=t.value,a=t.name;n.setState(Object(h.a)({},a,s))},n.onSubmit=function(e){e.preventDefault(),fetch("http://localhost:5000/login",{method:"POST",body:JSON.stringify(n.state),headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(j.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=9;break}return e.next=3,t.text();case 3:s=e.sent,localStorage.setItem("user",s),"Admin"===JSON.parse(s).role?n.props.history.push("/admin"):n.props.history.push("/dashboard"),e.next=11;break;case 9:throw new Error(t.error);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),alert("Error logging in please try again")}))},n.state={email:"",password:""},n}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsx)("h1",{children:"Login Below!"}),Object(n.jsx)("input",{type:"email",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleInputChange,required:!0}),Object(n.jsx)("input",{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleInputChange,required:!0}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})}}]),s}(a.Component);s(43);function p(){return Object(n.jsx)("header",{children:Object(n.jsxs)("div",{class:"row banner",children:[Object(n.jsx)("div",{class:"col-8",children:Object(n.jsx)("h1",{children:"R.I.S.E."})}),Object(n.jsx)("div",{class:"col-4",children:Object(n.jsx)("h3",{children:"POP POS"})})]})})}function v(){localStorage.clear(),window.location.href="/login"}function f(){return Object(n.jsx)("div",{className:"nav",children:Object(n.jsxs)("ul",{class:"nav flex-column col-2",children:[Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/dashboard",children:"Home"})}),Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)("a",{class:"nav-link",onClick:v,children:"Logout"})})]})})}s(49);function g(){var e=JSON.parse(localStorage.user);return e=e.name,Object(n.jsx)("nav",{class:"col-md-2 d-none d-md-block bg-light sidebar",children:Object(n.jsx)("div",{class:"sidebar-sticky",children:Object(n.jsxs)("ul",{class:"nav flex-column",children:[Object(n.jsxs)("li",{class:"nav-item  flex-md-nowrap p-160",children:[Object(n.jsx)("img",{}),Object(n.jsx)("p",{class:"nav-link",children:"Logged in as"}),Object(n.jsx)("p",{class:"nav-link",children:e})]}),Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/admin",children:" Home"})}),Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/admin/users/new",children:"Create User"})}),Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/admin/users",children:"Users List"})}),Object(n.jsx)("li",{class:"nav-item",children:Object(n.jsx)("a",{class:"nav-link",onClick:v,children:"Logout"})})]})})})}function w(){return Object(n.jsx)("h3",{children:"Oops, something went wrong"})}s(24);function S(e){var t=e.children,s=Object(o.f)();if(null==localStorage.user)return s.replace("/login"),null;if("Admin"!==JSON.parse(localStorage.user).role)return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("div",{class:"body",children:[Object(n.jsx)("nav",{class:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow",children:Object(n.jsx)("div",{class:"header w-100",children:Object(n.jsx)(o.a,{component:p})})}),Object(n.jsx)("div",{class:"container-fluid",children:Object(n.jsxs)("div",{class:"row main",children:[Object(n.jsx)(o.a,{component:g}),Object(n.jsx)("main",{class:"col-md-9 ml-sm-auto col-lg-10 px-4",children:Object(n.jsx)("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:Object(n.jsx)(o.a,{component:w})})})]})})]})});var a=JSON.parse(localStorage.user);return a=a.name,Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("div",{class:"body",children:[Object(n.jsx)("nav",{class:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow",children:Object(n.jsx)("div",{class:"header w-100",children:Object(n.jsx)(o.a,{component:p})})}),Object(n.jsx)("div",{class:"container-fluid",children:Object(n.jsxs)("div",{class:"row main",children:[Object(n.jsx)(o.a,{component:g}),Object(n.jsxs)("main",{class:"col-md-9 ml-sm-auto col-lg-10 px-4",children:[Object(n.jsxs)("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:[Object(n.jsx)("h1",{class:"h2",children:"welcome to your admin dashboard"}),Object(n.jsxs)("div",{class:"btn-toolbar mb-2 mb-md-0",children:[Object(n.jsxs)("div",{class:"btn-group mr-2",children:[Object(n.jsx)("button",{class:"btn btn-sm btn-outline-secondary",children:"Share"}),Object(n.jsx)("button",{class:"btn btn-sm btn-outline-secondary",children:"Export"})]}),Object(n.jsxs)("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle",children:[Object(n.jsx)("span",{"data-feather":"calendar"}),"This week"]})]})]}),t]})]})})]})})}function k(e){var t=e.children,s=Object(o.f)();if(null==localStorage.user)return s.replace("/login"),null;var a=JSON.parse(localStorage.user);return a=a.name,Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("div",{class:"container",children:[Object(n.jsx)(o.a,{component:p}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)(o.a,{component:f}),Object(n.jsxs)("div",{className:"col-8",children:[Object(n.jsxs)("h2",{children:["Hi ",a," Welcome to your Analyst Dashboard"]}),t]})]})]})})}var N=s(10),y=s.n(N),C=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={loansCollection:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.user).token;y()({method:"get",url:"http://localhost:5000/business",headers:{token:t}}).then((function(t){e.setState({loansCollection:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"getAllBusinessesWithLoans",value:function(){return this.state.loansCollection.map((function(e,t){if(e.loan){var s=e.loan.status.length;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:"/dashboard/loans/".concat(e._id),children:e.businessName})}),Object(n.jsxs)("td",{children:["$",e.loan.amount]}),Object(n.jsx)("td",{children:e.loan.status[s-1].currentStatus})]})}}))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"wrapper-users",children:Object(n.jsxs)("table",{className:"table table-striped",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Merchant "}),Object(n.jsx)("td",{children:"Amount Requested"}),Object(n.jsx)("td",{children:"Application Status"})]})}),Object(n.jsx)("tbody",{children:this.getAllBusinessesWithLoans()})]})})}}]),s}(a.Component),U=s(14),A=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={business:{},isLoaded:!1,status:{}},n.handleChange=n.handleChange.bind(Object(U.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(U.a)(n)),n}return Object(u.a)(s,[{key:"handleChange",value:function(e){this.setState({statusUpdate:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({status:this.state.statusUpdate});var t=JSON.parse(localStorage.user).token;y()({method:"post",url:"http://localhost:5000/loans/".concat(this.props.match.params.loanId),headers:{token:t},data:{currentStatus:this.state.statusUpdate}}).then((function(e){console.log(e.data),alert("Loan application status updated")})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t,s,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.user),s=t.token,e.next=4,y()({method:"get",url:"http://localhost:5000/business/".concat(this.props.match.params.loanId),headers:{token:s}}).then((function(e){n.setState({business:e.data,isLoaded:!0})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.isLoaded){var e={loan:this.state.business.loan},t=e.loan.status.length;return Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Business Name: "}),Object(n.jsx)("h5",{children:this.state.business.businessName})]}),Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Loan application value:"}),Object(n.jsxs)("h5",{children:["\xa3",e.loan.amount," "]})]})]}),Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Current status:"}),Object(n.jsxs)("h5",{children:[e.loan.status[t-1].currentStatus," "]})]}),Object(n.jsx)("div",{class:"col",children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)("label",{children:"Update status:"}),Object(n.jsxs)("p",{children:[Object(n.jsxs)("select",{statusUpdate:this.state.statusUpdate,onChange:this.handleChange,children:[Object(n.jsx)("option",{statusUpdate:"pending",children:"Pending"}),Object(n.jsx)("option",{statusUpdate:"forwarded",children:"Forwarded"}),Object(n.jsx)("option",{statusUpdate:"approved",children:"Approved"})]}),Object(n.jsx)("input",{type:"submit",value:"Update"})]})]})})]}),Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Gross Monthly Sales:"}),Object(n.jsxs)("h5",{children:[" \xa3",this.state.business.grossMonthlySales]})]}),Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Average Transaction Value:"}),Object(n.jsxs)("h5",{children:[" \xa3",this.state.business.averageTransactionValue]})]})]})]})}return Object(n.jsx)("div",{children:"Loading..."})}}]),s}(a.Component),E=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={loansCollection:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.user).token;y()({method:"get",url:"http://localhost:5000/business",headers:{token:t}}).then((function(t){e.setState({loansCollection:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"getAllBusinessesWithLoans",value:function(){return this.state.loansCollection.map((function(e,t){if(e.loan){var s=e.loan.status.length;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:"/admin/loans/".concat(e._id),children:e.businessName})}),Object(n.jsxs)("td",{children:["$",e.loan.amount]}),Object(n.jsx)("td",{children:e.loan.status[s-1].currentStatus})]})}}))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"wrapper-users",children:Object(n.jsxs)("table",{className:"table table-striped",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Merchant "}),Object(n.jsx)("td",{children:"Amount Requested"}),Object(n.jsx)("td",{children:"Application Status"})]})}),Object(n.jsx)("tbody",{children:this.getAllBusinessesWithLoans()})]})})}}]),s}(a.Component),J=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={name:"",email:"",password:"",role:""},n.onChangeUserName=n.onChangeUserName.bind(Object(U.a)(n)),n.onChangeUserEmail=n.onChangeUserEmail.bind(Object(U.a)(n)),n.onChangeUserPassword=n.onChangeUserPassword.bind(Object(U.a)(n)),n.onChangeUserRole=n.onChangeUserRole.bind(Object(U.a)(n)),n.onSubmit=n.onSubmit.bind(Object(U.a)(n)),n}return Object(u.a)(s,[{key:"onChangeUserName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeUserEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeUserPassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangeUserRole",value:function(e){this.setState({role:e.target.role})}},{key:"onSubmit",value:function(e){console.log("Submitting"),e.preventDefault();var t=JSON.parse(localStorage.user).token;y()({method:"post",url:"http://localhost:5000/users/new",headers:{token:t},data:{name:this.state.name,email:this.state.email,password:this.state.password,role:this.state.role}}).then((function(e){console.log(e.data),alert("New user added    ")})).catch((function(e){console.log(e)})),this.setState({name:"",email:"",password:"",role:""})}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Enter Name"}),Object(n.jsx)("input",{type:"text",value:this.state.name,onChange:this.onChangeUserName,className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Enter Email"}),Object(n.jsx)("input",{type:"text",value:this.state.email,onChange:this.onChangeUserEmail,className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Set Password"}),Object(n.jsx)("input",{type:"text",value:this.state.password,onChange:this.onChangeUserPassword,className:"form-control"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"User role"}),Object(n.jsxs)("select",{value:this.state.role,onChange:this.onChangeUserRole,class:"form-control btn btn-sm btn-outline-info dropdown-toggle",children:[Object(n.jsx)("option",{role:"Analyst",children:"Analyst"}),Object(n.jsx)("option",{role:"Admin",children:"Admin"})]})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Create User",className:"btn btn-secondary btn-block"})})]})})}}]),s}(a.Component),L=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={usersCollection:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.user).token;y()({method:"get",url:"http://localhost:5000/users",headers:{token:t}}).then((function(t){e.setState({usersCollection:t.data})})).catch((function(e){console.log(e)}))}},{key:"getAllUsers",value:function(){return this.state.usersCollection.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:"/admin/users/".concat(e._id),children:e.name})}),Object(n.jsx)("td",{children:e.email}),Object(n.jsx)("td",{children:e.role})]})}))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"wrapper-users",children:Object(n.jsxs)("table",{className:"table table-striped",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Name"}),Object(n.jsx)("td",{children:"Email"}),Object(n.jsx)("td",{children:"User Role"})]})}),Object(n.jsx)("tbody",{children:this.getAllUsers()})]})})}}]),s}(a.Component),I=function(e){Object(O.a)(s,e);var t=Object(m.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this,e)).state={user:{}},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t,s,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.user),s=t.token,e.next=4,y()({method:"get",url:"http://localhost:5000/users/".concat(this.props.match.params.userId),headers:{token:s}}).then((function(e){n.setState({user:e.data}),console.log(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("h5",{children:this.state.user.name})]}),Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Email"}),Object(n.jsx)("h5",{children:this.state.user.email})]})]}),Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Role"}),Object(n.jsx)("h5",{children:this.state.user.role})]}),Object(n.jsxs)("div",{class:"col",children:[Object(n.jsx)("label",{children:"Account Status"}),Object(n.jsx)("p",{children:Object(n.jsx)("button",{type:"button",class:"btn btn-danger",children:"Delete User"})})]})]})]})}}]),s}(a.Component);var D=function(){return Object(n.jsx)(l.a,{children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{path:"/login",component:x}),Object(n.jsx)(o.a,{exact:!0,path:"/error",component:w}),Object(n.jsx)(o.a,{path:"/dashboard",children:Object(n.jsx)(k,{children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/dashboard",component:C}),Object(n.jsx)(o.a,{exact:!0,path:"/dashboard/loans/:loanId",component:A})]})})}),Object(n.jsx)(o.a,{path:"/admin",children:Object(n.jsx)(S,{children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/admin",component:E}),Object(n.jsx)(o.a,{exact:!0,path:"/admin/users",component:L}),Object(n.jsx)(o.a,{exact:!0,path:"/admin/users/new",component:J}),Object(n.jsx)(o.a,{exact:!0,path:"/admin/users/:userId",component:I}),Object(n.jsx)(o.a,{exact:!0,path:"/admin/loans/:loanId",component:A})]})})})]})})};r.a.render(Object(n.jsx)(l.a,{children:Object(n.jsx)(D,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.578091ed.chunk.js.map